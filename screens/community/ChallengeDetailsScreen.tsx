import React, { useState } from 'react'
import { View, Text, ScrollView, StyleSheet, Pressable, Image } from 'react-native'\nimport { LinearGradient } from 'expo-linear-gradient'\nimport { Challenge } from '@/components/v3/community/ChallengeCard'\n\ninterface ChallengeDetailsScreenProps {\n  route: {\n    params: {\n      challenge: Challenge\n    }\n  }\n  navigation: any\n}\n\ninterface TeamMember {\n  id: string\n  name: string\n  avatar?: string\n  level: number\n  progress: number\n  streak: number\n}\n\nexport default function ChallengeDetailsScreen({ route, navigation }: ChallengeDetailsScreenProps) {\n  const { challenge } = route.params\n  const [isJoined, setIsJoined] = useState(challenge.isJoined || false)\n  \n  // Mock team members data\n  const teamMembers: TeamMember[] = [\n    { id: '1', name: 'Sarah M.', level: 8, progress: 85, streak: 5 },\n    { id: '2', name: 'Mike R.', level: 6, progress: 72, streak: 3 },\n    { id: '3', name: 'Emma C.', level: 12, progress: 90, streak: 7 },\n    { id: '4', name: 'Alex R.', level: 9, progress: 65, streak: 4 },\n    { id: '5', name: 'Lisa T.', level: 7, progress: 78, streak: 6 },\n  ]\n  \n  const getCategoryColor = (category: string) => {\n    switch (category) {\n      case 'nutrition': return '#10B981'\n      case 'cooking': return '#F59E0B'\n      case 'wellness': return '#8B5CF6'\n      case 'budget': return '#3B82F6'\n      case 'family': return '#EC4899'\n      default: return '#6B7280'\n    }\n  }\n  \n  const getDifficultyBadge = (difficulty: string) => {\n    switch (difficulty) {\n      case 'easy': return { text: 'Beginner', color: '#10B981' }\n      case 'medium': return { text: 'Intermediate', color: '#F59E0B' }\n      case 'hard': return { text: 'Advanced', color: '#EF4444' }\n      default: return { text: 'All Levels', color: '#6B7280' }\n    }\n  }\n  \n  const handleJoinChallenge = () => {\n    setIsJoined(!isJoined)\n    // TODO: Implement join/leave challenge logic\n  }\n  \n  const handleCheckIn = () => {\n    // TODO: Navigate to daily check-in\n    console.log('Check in pressed')\n  }\n  \n  const categoryColor = getCategoryColor(challenge.category)\n  const difficultyBadge = getDifficultyBadge(challenge.difficulty)\n  \n  return (\n    <LinearGradient\n      colors={['#F0FDF4', '#DBEAFE', '#FAF5FF']}\n      start={{ x: 0, y: 0 }}\n      end={{ x: 1, y: 1 }}\n      style={styles.container}\n    >\n      {/* Header */}\n      <View style={styles.header}>\n        <Pressable style={styles.backButton} onPress={() => navigation.goBack()}>\n          <Text style={styles.backIcon}>‚Üê</Text>\n        </Pressable>\n        <Text style={styles.headerTitle}>Challenge Details</Text>\n        <View style={styles.placeholder} />\n      </View>\n      \n      <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\n        <View style={styles.content}>\n          {/* Challenge Info Card */}\n          <View style={styles.challengeCard}>\n            <View style={[styles.categoryBar, { backgroundColor: categoryColor }]} />\n            \n            <View style={styles.challengeContent}>\n              <Text style={styles.challengeTitle}>{challenge.title}</Text>\n              \n              <View style={styles.badges}>\n                <View style={[styles.badge, { backgroundColor: `${difficultyBadge.color}20` }]}>\n                  <Text style={[styles.badgeText, { color: difficultyBadge.color }]}>\n                    {difficultyBadge.text}\n                  </Text>\n                </View>\n                <View style={styles.durationBadge}>\n                  <Text style={styles.durationText}>{challenge.duration} days</Text>\n                </View>\n                <View style={styles.categoryBadge}>\n                  <Text style={[styles.categoryText, { color: categoryColor }]}>\n                    {challenge.category}\n                  </Text>\n                </View>\n              </View>\n              \n              <Text style={styles.challengeDescription}>{challenge.description}</Text>\n              \n              <View style={styles.statsRow}>\n                <View style={styles.stat}>\n                  <Text style={styles.statNumber}>{challenge.participants}</Text>\n                  <Text style={styles.statLabel}>Participants</Text>\n                </View>\n                {isJoined && challenge.progress !== undefined && (\n                  <View style={styles.stat}>\n                    <Text style={styles.statNumber}>{challenge.progress}%</Text>\n                    <Text style={styles.statLabel}>Your Progress</Text>\n                  </View>\n                )}\n                {isJoined && challenge.currentStreak !== undefined && (\n                  <View style={styles.stat}>\n                    <Text style={styles.statNumber}>{challenge.currentStreak}</Text>\n                    <Text style={styles.statLabel}>Day Streak</Text>\n                  </View>\n                )}\n              </View>\n            </View>\n          </View>\n          \n          {/* Progress Section */}\n          {isJoined && challenge.progress !== undefined && (\n            <View style={styles.progressCard}>\n              <Text style={styles.sectionTitle}>Your Progress</Text>\n              <View style={styles.progressBarContainer}>\n                <View style={styles.progressBar}>\n                  <View \n                    style={[styles.progressFill, { width: `${challenge.progress}%` }]} \n                  />\n                </View>\n                <Text style={styles.progressText}>{challenge.progress}%</Text>\n              </View>\n              \n              {challenge.currentStreak !== undefined && (\n                <View style={styles.streakContainer}>\n                  <Text style={styles.streakIcon}>üî•</Text>\n                  <Text style={styles.streakText}>\n                    {challenge.currentStreak} day streak! Keep it up!\n                  </Text>\n                </View>\n              )}\n              \n              {isJoined && (\n                <Pressable style={styles.checkInButton} onPress={handleCheckIn}>\n                  <Text style={styles.checkInButtonText}>Daily Check-In</Text>\n                </Pressable>\n              )}\n            </View>\n          )}\n          \n          {/* Team Members */}\n          <View style={styles.teamCard}>\n            <Text style={styles.sectionTitle}>Team Members</Text>\n            <Text style={styles.sectionSubtitle}>See how others are doing</Text>\n            \n            <View style={styles.membersList}>\n              {teamMembers.slice(0, 5).map((member) => (\n                <View key={member.id} style={styles.memberRow}>\n                  <View style={styles.memberInfo}>\n                    <View style={styles.memberAvatar}>\n                      {member.avatar ? (\n                        <Image source={{ uri: member.avatar }} style={styles.avatarImage} />\n                      ) : (\n                        <Text style={styles.avatarEmoji}>üë§</Text>\n                      )}\n                    </View>\n                    <View style={styles.memberDetails}>\n                      <Text style={styles.memberName}>{member.name}</Text>\n                      <Text style={styles.memberLevel}>Level {member.level}</Text>\n                    </View>\n                  </View>\n                  \n                  <View style={styles.memberStats}>\n                    <Text style={styles.memberProgress}>{member.progress}%</Text>\n                    <View style={styles.memberStreak}>\n                      <Text style={styles.streakIcon}>üî•</Text>\n                      <Text style={styles.memberStreakText}>{member.streak}</Text>\n                    </View>\n                  </View>\n                </View>\n              ))}\n            </View>\n            \n            <Text style={styles.teamFooter}>+{challenge.participants - 5} more members</Text>\n          </View>\n          \n          {/* Action Button */}\n          <View style={styles.actionSection}>\n            <Pressable \n              style={[styles.actionButton, isJoined && styles.leaveButton]} \n              onPress={handleJoinChallenge}\n            >\n              <Text style={[styles.actionButtonText, isJoined && styles.leaveButtonText]}>\n                {isJoined ? 'Leave Challenge' : 'Join Challenge'}\n              </Text>\n            </Pressable>\n          </View>\n        </View>\n      </ScrollView>\n    </LinearGradient>\n  )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 24,\n    paddingTop: 48,\n    paddingBottom: 16,\n  },\n  backButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: 'rgba(255, 255, 255, 0.9)',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  backIcon: {\n    fontSize: 20,\n    color: '#1F2937',\n  },\n  headerTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#1F2937',\n    fontFamily: 'System',\n  },\n  placeholder: {\n    width: 40,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  content: {\n    padding: 24,\n  },\n  challengeCard: {\n    backgroundColor: 'white',\n    borderRadius: 20,\n    overflow: 'hidden',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n    marginBottom: 20,\n  },\n  categoryBar: {\n    height: 6,\n  },\n  challengeContent: {\n    padding: 20,\n  },\n  challengeTitle: {\n    fontSize: 24,\n    fontWeight: '700',\n    color: '#1F2937',\n    marginBottom: 12,\n    fontFamily: 'System',\n  },\n  badges: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n    marginBottom: 16,\n  },\n  badge: {\n    paddingHorizontal: 10,\n    paddingVertical: 6,\n    borderRadius: 8,\n  },\n  badgeText: {\n    fontSize: 12,\n    fontWeight: '600',\n    fontFamily: 'System',\n  },\n  durationBadge: {\n    backgroundColor: '#F3F4F6',\n    paddingHorizontal: 10,\n    paddingVertical: 6,\n    borderRadius: 8,\n  },\n  durationText: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: '#6B7280',\n    fontFamily: 'System',\n  },\n  categoryBadge: {\n    backgroundColor: '#F9FAFB',\n    paddingHorizontal: 10,\n    paddingVertical: 6,\n    borderRadius: 8,\n  },\n  categoryText: {\n    fontSize: 12,\n    fontWeight: '600',\n    fontFamily: 'System',\n    textTransform: 'capitalize',\n  },\n  challengeDescription: {\n    fontSize: 16,\n    color: '#6B7280',\n    lineHeight: 24,\n    marginBottom: 20,\n    fontFamily: 'System',\n  },\n  statsRow: {\n    flexDirection: 'row',\n    gap: 24,\n  },\n  stat: {\n    alignItems: 'center',\n  },\n  statNumber: {\n    fontSize: 20,\n    fontWeight: '700',\n    color: '#1F2937',\n    fontFamily: 'System',\n  },\n  statLabel: {\n    fontSize: 12,\n    color: '#6B7280',\n    fontFamily: 'System',\n  },\n  progressCard: {\n    backgroundColor: 'white',\n    borderRadius: 20,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n    marginBottom: 20,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#1F2937',\n    marginBottom: 4,\n    fontFamily: 'System',\n  },\n  sectionSubtitle: {\n    fontSize: 14,\n    color: '#6B7280',\n    marginBottom: 16,\n    fontFamily: 'System',\n  },\n  progressBarContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n    marginBottom: 16,\n  },\n  progressBar: {\n    flex: 1,\n    height: 8,\n    backgroundColor: '#E5E7EB',\n    borderRadius: 4,\n  },\n  progressFill: {\n    height: '100%',\n    backgroundColor: '#10B981',\n    borderRadius: 4,\n  },\n  progressText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#1F2937',\n    fontFamily: 'System',\n  },\n  streakContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    marginBottom: 16,\n  },\n  streakIcon: {\n    fontSize: 20,\n  },\n  streakText: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: '#F59E0B',\n    fontFamily: 'System',\n  },\n  checkInButton: {\n    backgroundColor: '#10B981',\n    borderRadius: 12,\n    paddingVertical: 12,\n    alignItems: 'center',\n  },\n  checkInButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: 'System',\n  },\n  teamCard: {\n    backgroundColor: 'white',\n    borderRadius: 20,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n    marginBottom: 20,\n  },\n  membersList: {\n    gap: 12,\n  },\n  memberRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  memberInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  memberAvatar: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: '#F3F4F6',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginRight: 12,\n  },\n  avatarImage: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n  },\n  avatarEmoji: {\n    fontSize: 16,\n  },\n  memberDetails: {\n    flex: 1,\n  },\n  memberName: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: '#1F2937',\n    fontFamily: 'System',\n  },\n  memberLevel: {\n    fontSize: 12,\n    color: '#6B7280',\n    fontFamily: 'System',\n  },\n  memberStats: {\n    alignItems: 'flex-end',\n  },\n  memberProgress: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: '#10B981',\n    fontFamily: 'System',\n  },\n  memberStreak: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  memberStreakText: {\n    fontSize: 12,\n    color: '#F59E0B',\n    fontFamily: 'System',\n  },\n  teamFooter: {\n    textAlign: 'center',\n    fontSize: 14,\n    color: '#6B7280',\n    marginTop: 16,\n    fontFamily: 'System',\n  },\n  actionSection: {\n    paddingBottom: 20,\n  },\n  actionButton: {\n    backgroundColor: '#10B981',\n    borderRadius: 16,\n    paddingVertical: 16,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 4,\n  },\n  actionButtonText: {\n    color: 'white',\n    fontSize: 18,\n    fontWeight: '600',\n    fontFamily: 'System',\n  },\n  leaveButton: {\n    backgroundColor: '#EF4444',\n  },\n  leaveButtonText: {\n    color: 'white',\n  },\n})"