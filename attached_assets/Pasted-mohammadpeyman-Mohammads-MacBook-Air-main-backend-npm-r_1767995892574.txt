mohammadpeyman@Mohammads-MacBook-Air main-backend % npm run dev

> wellnoosh-main-backend@1.0.0 dev
> nodemon src/index.ts

[nodemon] 3.1.10
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: ts,json
[nodemon] starting `ts-node src/index.ts`
ü§ñ Using direct OpenAI API key
üçΩÔ∏è Python API URL for DSPy meal planner: http://localhost:8000
üöÄ WellNoosh BFF API running on port 3000
üìä Environment: development
üîó Health check: http://localhost:3000/health
üéØ Server listening on: { address: '::', family: 'IPv6', port: 3000 }
Error creating/updating user profile: {
  code: '23502',
  details: null,
  hint: null,
  message: 'null value in column "user_id" of relation "user_profiles" violates not-null constraint'
}
Profile data: {
  id: '971cd60f-e97c-4825-9ed2-c5177b958fd1',
  full_name: 'Ttest20206',
  country: 'Spain',
  city: 'Barcelona',
  postal_code: '08009',
  age: undefined,
  gender: undefined,
  weight: undefined,
  weight_unit: 'kg',
  height: undefined,
  height_unit: 'cm',
  height_feet: undefined,
  height_inches: undefined,
  diet_style: undefined,
  custom_diet_style: undefined,
  allergies: undefined,
  medical_conditions: undefined,
  activity_level: undefined,
  health_goals: undefined,
  food_restrictions: undefined,
  cooking_skill: undefined,
  meal_preference: undefined,
  subscription_tier: 'free',
  daily_swipes_used: 0,
  last_swipe_date: '2026-01-09',
  favorite_recipes: undefined,
  selected_recipes: undefined
}
Error in createProfile: Error: Failed to create user profile: null value in column "user_id" of relation "user_profiles" violates not-null constraint
    at createError (/Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/middleware/errorHandler.ts:58:17)
    at UserService.createProfile (/Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/services/userService.ts:110:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/controllers/authController.ts:26:23 {
  statusCode: 500,
  isOperational: true
}
Error creating user profile: Error: Failed to create user profile: null value in column "user_id" of relation "user_profiles" violates not-null constraint
    at createError (/Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/middleware/errorHandler.ts:58:17)
    at UserService.createProfile (/Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/services/userService.ts:110:26)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async /Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/controllers/authController.ts:26:23 {
  statusCode: 500,
  isOperational: true
}
Error: {
  message: 'Failed to create user profile',
  stack: 'Error: Failed to create user profile\n' +
    '    at createError (/Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/middleware/errorHandler.ts:58:17)\n' +
    '    at /Users/mohammadpeyman/Desktop/PeyFab_Tech_demo/WellNoosh-app/main-backend/src/controllers/authController.ts:44:24\n' +
    '    at processTicksAndRejections (node:internal/process/task_queues:95:5)',
  url: '/api/auth/signup',
  method: 'POST',
  timestamp: '2026-01-09T21:56:55.996Z'
}
::1 - - [09/Jan/2026:21:56:55 +0000] "POST /api/auth/signup HTTP/1.1" 500 96 "-" "Expo/2.33.17 CFNetwork/3826.500.131 Darwin/24.6.0"